{"payload":{"allShortcutsEnabled":false,"fileTree":{"utils":{"items":[{"name":"dataset_paths.json","path":"utils/dataset_paths.json","contentType":"file"},{"name":"metrics.py","path":"utils/metrics.py","contentType":"file"},{"name":"mlqa_evaluate.py","path":"utils/mlqa_evaluate.py","contentType":"file"},{"name":"process.py","path":"utils/process.py","contentType":"file"},{"name":"roberta_with_sideblock.py","path":"utils/roberta_with_sideblock.py","contentType":"file"},{"name":"sam.py","path":"utils/sam.py","contentType":"file"},{"name":"squad_evaluate.py","path":"utils/squad_evaluate.py","contentType":"file"}],"totalCount":7},"":{"items":[{"name":"utils","path":"utils","contentType":"directory"},{"name":"AntiCF.py","path":"AntiCF.py","contentType":"file"},{"name":"LICENSE","path":"LICENSE","contentType":"file"},{"name":"README.md","path":"README.md","contentType":"file"},{"name":"baselines.py","path":"baselines.py","contentType":"file"}],"totalCount":5}},"fileTreeProcessingTime":2.553745,"foldersToFetch":[],"reducedMotionEnabled":null,"repo":{"id":706365581,"defaultBranch":"main","name":"Anti-CF","ownerLogin":"yisunlp","currentUserCanPush":false,"isFork":false,"isEmpty":false,"createdAt":"2023-10-17T20:01:29.000Z","ownerAvatar":"https://avatars.githubusercontent.com/u/123295877?v=4","public":true,"private":false,"isOrgOwned":false},"symbolsExpanded":false,"treeExpanded":true,"refInfo":{"name":"main","listCacheKey":"v0:1697572920.0","canEdit":false,"refType":"branch","currentOid":"b6dbe35fcdc0e11a53f6cb3d43b47953c9608f72"},"path":"utils/mlqa_evaluate.py","currentUser":null,"blob":{"rawLines":["# coding=utf-8\r","# Based on the MLQA evaluation script from:\r","# https://github.com/facebookresearch/MLQA/blob/master/mlqa_evaluation_v1.py\r","# Copyright (c) 2019-present, Facebook, Inc.\r","# All rights reserved.\r","#\r","# This source code is licensed under the license found in the\r","# LICENSE file in the root directory of this source tree.\r","#\r","\"\"\" Official evaluation script for the MLQA dataset. \"\"\"\r","from __future__ import print_function\r","from collections import Counter\r","import string\r","import re\r","import sys\r","import unicodedata\r","\r","\r","PUNCT = {chr(i) for i in range(sys.maxunicode) if unicodedata.category(chr(i)).startswith('P')}.union(string.punctuation)\r","WHITESPACE_LANGS = ['en', 'es', 'hi', 'vi', 'de', 'ar']\r","MIXED_SEGMENTATION_LANGS = ['zh']\r","\r","\r","def whitespace_tokenize(text):\r","    return text.split()\r","\r","\r","def mixed_segmentation(text):\r","    segs_out = []\r","    temp_str = \"\"\r","    for char in text:\r","        if re.search(r'[\\u4e00-\\u9fa5]', char) or char in PUNCT:\r","            if temp_str != \"\":\r","                ss = whitespace_tokenize(temp_str)\r","                segs_out.extend(ss)\r","                temp_str = \"\"\r","            segs_out.append(char)\r","        else:\r","            temp_str += char\r","\r","    if temp_str != \"\":\r","        ss = whitespace_tokenize(temp_str)\r","        segs_out.extend(ss)\r","\r","    return segs_out\r","\r","\r","def normalize_answer(s, lang):\r","    \"\"\"Lower text and remove punctuation, articles and extra whitespace.\"\"\"\r","\r","    def remove_articles(text, lang):\r","        if lang == 'en':\r","            return re.sub(r'\\b(a|an|the)\\b', ' ', text)\r","        elif lang == 'es':\r","            return re.sub(r'\\b(un|una|unos|unas|el|la|los|las)\\b', ' ', text)\r","        elif lang == 'hi':\r","            return text # Hindi does not have formal articles\r","        elif lang == 'vi':\r","            return re.sub(r'\\b(của|là|cái|chiếc|những)\\b', ' ', text)\r","        elif lang == 'de':\r","            return re.sub(r'\\b(ein|eine|einen|einem|eines|einer|der|die|das|den|dem|des)\\b', ' ', text)\r","        elif lang == 'ar':\r","            return re.sub('\\sال^|ال', ' ', text)\r","        elif lang == 'zh':\r","            return text # Chinese does not have formal articles\r","        else:\r","            raise Exception('Unknown Language {}'.format(lang))\r","\r","    def white_space_fix(text, lang):\r","        if lang in WHITESPACE_LANGS:\r","            tokens = whitespace_tokenize(text)\r","        elif lang in MIXED_SEGMENTATION_LANGS:\r","            tokens = mixed_segmentation(text)\r","        else:\r","            raise Exception('Unknown Language {}'.format(lang))\r","        return ' '.join([t for t in tokens if t.strip() != ''])\r","\r","    def remove_punc(text):\r","        return ''.join(ch for ch in text if ch not in PUNCT)\r","\r","    def lower(text):\r","        return text.lower()\r","\r","    return white_space_fix(remove_articles(remove_punc(lower(s)), lang), lang)\r","\r","\r","def f1_score(prediction, ground_truth, lang):\r","    prediction_tokens = normalize_answer(prediction, lang).split()\r","    ground_truth_tokens = normalize_answer(ground_truth, lang).split()\r","    common = Counter(prediction_tokens) & Counter(ground_truth_tokens)\r","    num_same = sum(common.values())\r","    if num_same == 0:\r","        return 0\r","    precision = 1.0 * num_same / len(prediction_tokens)\r","    recall = 1.0 * num_same / len(ground_truth_tokens)\r","    f1 = (2 * precision * recall) / (precision + recall)\r","    return f1\r","\r","\r","def exact_match_score(prediction, ground_truth, lang):\r","    return normalize_answer(prediction, lang) == normalize_answer(ground_truth, lang)\r","\r","\r","def metric_max_over_ground_truths(metric_fn, prediction, ground_truths, lang):\r","    scores_for_ground_truths = []\r","    for ground_truth in ground_truths:\r","        score = metric_fn(prediction, ground_truth, lang)\r","        scores_for_ground_truths.append(score)\r","    return max(scores_for_ground_truths)\r","\r","\r","def evaluate_mlqa(dataset, predictions, lang):\r","    f1 = exact_match = total = 0\r","    for article in dataset:\r","        for paragraph in article['paragraphs']:\r","            for qa in paragraph['qas']:\r","                total += 1\r","                if qa['id'] not in predictions:\r","                    message = 'Unanswered question ' + qa['id'] + \\\r","                              ' will receive score 0.'\r","                    print(message, file=sys.stderr)\r","                    continue\r","                ground_truths = list(map(lambda x: x['text'], qa['answers']))\r","                prediction = predictions[qa['id']]\r","                exact_match += metric_max_over_ground_truths(\r","                    exact_match_score, prediction, ground_truths, lang)\r","                f1 += metric_max_over_ground_truths(\r","                    f1_score, prediction, ground_truths, lang)\r","\r","    exact_match = 100.0 * exact_match / total\r","    f1 = 100.0 * f1 / total\r","\r","    return {'exact_match': exact_match, 'f1': f1}\r"],"stylingDirectives":[[{"start":0,"end":15,"cssClass":"pl-c"}],[{"start":0,"end":44,"cssClass":"pl-c"}],[{"start":0,"end":77,"cssClass":"pl-c"}],[{"start":0,"end":45,"cssClass":"pl-c"}],[{"start":0,"end":23,"cssClass":"pl-c"}],[{"start":0,"end":2,"cssClass":"pl-c"}],[{"start":0,"end":62,"cssClass":"pl-c"}],[{"start":0,"end":58,"cssClass":"pl-c"}],[{"start":0,"end":2,"cssClass":"pl-c"}],[{"start":0,"end":56,"cssClass":"pl-s"}],[{"start":0,"end":4,"cssClass":"pl-k"},{"start":16,"end":22,"cssClass":"pl-k"},{"start":23,"end":37,"cssClass":"pl-s1"}],[{"start":0,"end":4,"cssClass":"pl-k"},{"start":5,"end":16,"cssClass":"pl-s1"},{"start":17,"end":23,"cssClass":"pl-k"},{"start":24,"end":31,"cssClass":"pl-v"}],[{"start":0,"end":6,"cssClass":"pl-k"},{"start":7,"end":13,"cssClass":"pl-s1"}],[{"start":0,"end":6,"cssClass":"pl-k"},{"start":7,"end":9,"cssClass":"pl-s1"}],[{"start":0,"end":6,"cssClass":"pl-k"},{"start":7,"end":10,"cssClass":"pl-s1"}],[{"start":0,"end":6,"cssClass":"pl-k"},{"start":7,"end":18,"cssClass":"pl-s1"}],[],[],[{"start":0,"end":5,"cssClass":"pl-v"},{"start":6,"end":7,"cssClass":"pl-c1"},{"start":9,"end":12,"cssClass":"pl-en"},{"start":13,"end":14,"cssClass":"pl-s1"},{"start":16,"end":19,"cssClass":"pl-k"},{"start":20,"end":21,"cssClass":"pl-s1"},{"start":22,"end":24,"cssClass":"pl-c1"},{"start":25,"end":30,"cssClass":"pl-en"},{"start":31,"end":34,"cssClass":"pl-s1"},{"start":35,"end":45,"cssClass":"pl-s1"},{"start":47,"end":49,"cssClass":"pl-k"},{"start":50,"end":61,"cssClass":"pl-s1"},{"start":62,"end":70,"cssClass":"pl-en"},{"start":71,"end":74,"cssClass":"pl-en"},{"start":75,"end":76,"cssClass":"pl-s1"},{"start":79,"end":89,"cssClass":"pl-en"},{"start":90,"end":93,"cssClass":"pl-s"},{"start":96,"end":101,"cssClass":"pl-en"},{"start":102,"end":108,"cssClass":"pl-s1"},{"start":109,"end":120,"cssClass":"pl-s1"}],[{"start":0,"end":16,"cssClass":"pl-v"},{"start":17,"end":18,"cssClass":"pl-c1"},{"start":20,"end":24,"cssClass":"pl-s"},{"start":26,"end":30,"cssClass":"pl-s"},{"start":32,"end":36,"cssClass":"pl-s"},{"start":38,"end":42,"cssClass":"pl-s"},{"start":44,"end":48,"cssClass":"pl-s"},{"start":50,"end":54,"cssClass":"pl-s"}],[{"start":0,"end":24,"cssClass":"pl-v"},{"start":25,"end":26,"cssClass":"pl-c1"},{"start":28,"end":32,"cssClass":"pl-s"}],[],[],[{"start":0,"end":3,"cssClass":"pl-k"},{"start":4,"end":23,"cssClass":"pl-en"},{"start":24,"end":28,"cssClass":"pl-s1"}],[{"start":4,"end":10,"cssClass":"pl-k"},{"start":11,"end":15,"cssClass":"pl-s1"},{"start":16,"end":21,"cssClass":"pl-en"}],[],[],[{"start":0,"end":3,"cssClass":"pl-k"},{"start":4,"end":22,"cssClass":"pl-en"},{"start":23,"end":27,"cssClass":"pl-s1"}],[{"start":4,"end":12,"cssClass":"pl-s1"},{"start":13,"end":14,"cssClass":"pl-c1"}],[{"start":4,"end":12,"cssClass":"pl-s1"},{"start":13,"end":14,"cssClass":"pl-c1"},{"start":15,"end":17,"cssClass":"pl-s"}],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":12,"cssClass":"pl-s1"},{"start":13,"end":15,"cssClass":"pl-c1"},{"start":16,"end":20,"cssClass":"pl-s1"}],[{"start":8,"end":10,"cssClass":"pl-k"},{"start":11,"end":13,"cssClass":"pl-s1"},{"start":14,"end":20,"cssClass":"pl-en"},{"start":21,"end":39,"cssClass":"pl-s"},{"start":41,"end":45,"cssClass":"pl-s1"},{"start":47,"end":49,"cssClass":"pl-c1"},{"start":50,"end":54,"cssClass":"pl-s1"},{"start":55,"end":57,"cssClass":"pl-c1"},{"start":58,"end":63,"cssClass":"pl-v"}],[{"start":12,"end":14,"cssClass":"pl-k"},{"start":15,"end":23,"cssClass":"pl-s1"},{"start":24,"end":26,"cssClass":"pl-c1"},{"start":27,"end":29,"cssClass":"pl-s"}],[{"start":16,"end":18,"cssClass":"pl-s1"},{"start":19,"end":20,"cssClass":"pl-c1"},{"start":21,"end":40,"cssClass":"pl-en"},{"start":41,"end":49,"cssClass":"pl-s1"}],[{"start":16,"end":24,"cssClass":"pl-s1"},{"start":25,"end":31,"cssClass":"pl-en"},{"start":32,"end":34,"cssClass":"pl-s1"}],[{"start":16,"end":24,"cssClass":"pl-s1"},{"start":25,"end":26,"cssClass":"pl-c1"},{"start":27,"end":29,"cssClass":"pl-s"}],[{"start":12,"end":20,"cssClass":"pl-s1"},{"start":21,"end":27,"cssClass":"pl-en"},{"start":28,"end":32,"cssClass":"pl-s1"}],[{"start":8,"end":12,"cssClass":"pl-k"}],[{"start":12,"end":20,"cssClass":"pl-s1"},{"start":21,"end":23,"cssClass":"pl-c1"},{"start":24,"end":28,"cssClass":"pl-s1"}],[],[{"start":4,"end":6,"cssClass":"pl-k"},{"start":7,"end":15,"cssClass":"pl-s1"},{"start":16,"end":18,"cssClass":"pl-c1"},{"start":19,"end":21,"cssClass":"pl-s"}],[{"start":8,"end":10,"cssClass":"pl-s1"},{"start":11,"end":12,"cssClass":"pl-c1"},{"start":13,"end":32,"cssClass":"pl-en"},{"start":33,"end":41,"cssClass":"pl-s1"}],[{"start":8,"end":16,"cssClass":"pl-s1"},{"start":17,"end":23,"cssClass":"pl-en"},{"start":24,"end":26,"cssClass":"pl-s1"}],[],[{"start":4,"end":10,"cssClass":"pl-k"},{"start":11,"end":19,"cssClass":"pl-s1"}],[],[],[{"start":0,"end":3,"cssClass":"pl-k"},{"start":4,"end":20,"cssClass":"pl-en"},{"start":21,"end":22,"cssClass":"pl-s1"},{"start":24,"end":28,"cssClass":"pl-s1"}],[{"start":4,"end":75,"cssClass":"pl-s"}],[],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":23,"cssClass":"pl-en"},{"start":24,"end":28,"cssClass":"pl-s1"},{"start":30,"end":34,"cssClass":"pl-s1"}],[{"start":8,"end":10,"cssClass":"pl-k"},{"start":11,"end":15,"cssClass":"pl-s1"},{"start":16,"end":18,"cssClass":"pl-c1"},{"start":19,"end":23,"cssClass":"pl-s"}],[{"start":12,"end":18,"cssClass":"pl-k"},{"start":19,"end":21,"cssClass":"pl-s1"},{"start":22,"end":25,"cssClass":"pl-en"},{"start":26,"end":43,"cssClass":"pl-s"},{"start":45,"end":48,"cssClass":"pl-s"},{"start":50,"end":54,"cssClass":"pl-s1"}],[{"start":8,"end":12,"cssClass":"pl-k"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":18,"end":20,"cssClass":"pl-c1"},{"start":21,"end":25,"cssClass":"pl-s"}],[{"start":12,"end":18,"cssClass":"pl-k"},{"start":19,"end":21,"cssClass":"pl-s1"},{"start":22,"end":25,"cssClass":"pl-en"},{"start":26,"end":65,"cssClass":"pl-s"},{"start":67,"end":70,"cssClass":"pl-s"},{"start":72,"end":76,"cssClass":"pl-s1"}],[{"start":8,"end":12,"cssClass":"pl-k"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":18,"end":20,"cssClass":"pl-c1"},{"start":21,"end":25,"cssClass":"pl-s"}],[{"start":12,"end":18,"cssClass":"pl-k"},{"start":19,"end":23,"cssClass":"pl-s1"},{"start":24,"end":62,"cssClass":"pl-c"}],[{"start":8,"end":12,"cssClass":"pl-k"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":18,"end":20,"cssClass":"pl-c1"},{"start":21,"end":25,"cssClass":"pl-s"}],[{"start":12,"end":18,"cssClass":"pl-k"},{"start":19,"end":21,"cssClass":"pl-s1"},{"start":22,"end":25,"cssClass":"pl-en"},{"start":26,"end":57,"cssClass":"pl-s"},{"start":59,"end":62,"cssClass":"pl-s"},{"start":64,"end":68,"cssClass":"pl-s1"}],[{"start":8,"end":12,"cssClass":"pl-k"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":18,"end":20,"cssClass":"pl-c1"},{"start":21,"end":25,"cssClass":"pl-s"}],[{"start":12,"end":18,"cssClass":"pl-k"},{"start":19,"end":21,"cssClass":"pl-s1"},{"start":22,"end":25,"cssClass":"pl-en"},{"start":26,"end":91,"cssClass":"pl-s"},{"start":93,"end":96,"cssClass":"pl-s"},{"start":98,"end":102,"cssClass":"pl-s1"}],[{"start":8,"end":12,"cssClass":"pl-k"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":18,"end":20,"cssClass":"pl-c1"},{"start":21,"end":25,"cssClass":"pl-s"}],[{"start":12,"end":18,"cssClass":"pl-k"},{"start":19,"end":21,"cssClass":"pl-s1"},{"start":22,"end":25,"cssClass":"pl-en"},{"start":26,"end":36,"cssClass":"pl-s"},{"start":38,"end":41,"cssClass":"pl-s"},{"start":43,"end":47,"cssClass":"pl-s1"}],[{"start":8,"end":12,"cssClass":"pl-k"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":18,"end":20,"cssClass":"pl-c1"},{"start":21,"end":25,"cssClass":"pl-s"}],[{"start":12,"end":18,"cssClass":"pl-k"},{"start":19,"end":23,"cssClass":"pl-s1"},{"start":24,"end":64,"cssClass":"pl-c"}],[{"start":8,"end":12,"cssClass":"pl-k"}],[{"start":12,"end":17,"cssClass":"pl-k"},{"start":18,"end":27,"cssClass":"pl-v"},{"start":28,"end":49,"cssClass":"pl-s"},{"start":50,"end":56,"cssClass":"pl-en"},{"start":57,"end":61,"cssClass":"pl-s1"}],[],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":23,"cssClass":"pl-en"},{"start":24,"end":28,"cssClass":"pl-s1"},{"start":30,"end":34,"cssClass":"pl-s1"}],[{"start":8,"end":10,"cssClass":"pl-k"},{"start":11,"end":15,"cssClass":"pl-s1"},{"start":16,"end":18,"cssClass":"pl-c1"},{"start":19,"end":35,"cssClass":"pl-v"}],[{"start":12,"end":18,"cssClass":"pl-s1"},{"start":19,"end":20,"cssClass":"pl-c1"},{"start":21,"end":40,"cssClass":"pl-en"},{"start":41,"end":45,"cssClass":"pl-s1"}],[{"start":8,"end":12,"cssClass":"pl-k"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":18,"end":20,"cssClass":"pl-c1"},{"start":21,"end":45,"cssClass":"pl-v"}],[{"start":12,"end":18,"cssClass":"pl-s1"},{"start":19,"end":20,"cssClass":"pl-c1"},{"start":21,"end":39,"cssClass":"pl-en"},{"start":40,"end":44,"cssClass":"pl-s1"}],[{"start":8,"end":12,"cssClass":"pl-k"}],[{"start":12,"end":17,"cssClass":"pl-k"},{"start":18,"end":27,"cssClass":"pl-v"},{"start":28,"end":49,"cssClass":"pl-s"},{"start":50,"end":56,"cssClass":"pl-en"},{"start":57,"end":61,"cssClass":"pl-s1"}],[{"start":8,"end":14,"cssClass":"pl-k"},{"start":15,"end":18,"cssClass":"pl-s"},{"start":19,"end":23,"cssClass":"pl-en"},{"start":25,"end":26,"cssClass":"pl-s1"},{"start":27,"end":30,"cssClass":"pl-k"},{"start":31,"end":32,"cssClass":"pl-s1"},{"start":33,"end":35,"cssClass":"pl-c1"},{"start":36,"end":42,"cssClass":"pl-s1"},{"start":43,"end":45,"cssClass":"pl-k"},{"start":46,"end":47,"cssClass":"pl-s1"},{"start":48,"end":53,"cssClass":"pl-en"},{"start":56,"end":58,"cssClass":"pl-c1"},{"start":59,"end":61,"cssClass":"pl-s"}],[],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":19,"cssClass":"pl-en"},{"start":20,"end":24,"cssClass":"pl-s1"}],[{"start":8,"end":14,"cssClass":"pl-k"},{"start":15,"end":17,"cssClass":"pl-s"},{"start":18,"end":22,"cssClass":"pl-en"},{"start":23,"end":25,"cssClass":"pl-s1"},{"start":26,"end":29,"cssClass":"pl-k"},{"start":30,"end":32,"cssClass":"pl-s1"},{"start":33,"end":35,"cssClass":"pl-c1"},{"start":36,"end":40,"cssClass":"pl-s1"},{"start":41,"end":43,"cssClass":"pl-k"},{"start":44,"end":46,"cssClass":"pl-s1"},{"start":47,"end":50,"cssClass":"pl-c1"},{"start":51,"end":53,"cssClass":"pl-c1"},{"start":54,"end":59,"cssClass":"pl-v"}],[],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":13,"cssClass":"pl-en"},{"start":14,"end":18,"cssClass":"pl-s1"}],[{"start":8,"end":14,"cssClass":"pl-k"},{"start":15,"end":19,"cssClass":"pl-s1"},{"start":20,"end":25,"cssClass":"pl-en"}],[],[{"start":4,"end":10,"cssClass":"pl-k"},{"start":11,"end":26,"cssClass":"pl-en"},{"start":27,"end":42,"cssClass":"pl-en"},{"start":43,"end":54,"cssClass":"pl-en"},{"start":55,"end":60,"cssClass":"pl-en"},{"start":61,"end":62,"cssClass":"pl-s1"},{"start":66,"end":70,"cssClass":"pl-s1"},{"start":73,"end":77,"cssClass":"pl-s1"}],[],[],[{"start":0,"end":3,"cssClass":"pl-k"},{"start":4,"end":12,"cssClass":"pl-en"},{"start":13,"end":23,"cssClass":"pl-s1"},{"start":25,"end":37,"cssClass":"pl-s1"},{"start":39,"end":43,"cssClass":"pl-s1"}],[{"start":4,"end":21,"cssClass":"pl-s1"},{"start":22,"end":23,"cssClass":"pl-c1"},{"start":24,"end":40,"cssClass":"pl-en"},{"start":41,"end":51,"cssClass":"pl-s1"},{"start":53,"end":57,"cssClass":"pl-s1"},{"start":59,"end":64,"cssClass":"pl-en"}],[{"start":4,"end":23,"cssClass":"pl-s1"},{"start":24,"end":25,"cssClass":"pl-c1"},{"start":26,"end":42,"cssClass":"pl-en"},{"start":43,"end":55,"cssClass":"pl-s1"},{"start":57,"end":61,"cssClass":"pl-s1"},{"start":63,"end":68,"cssClass":"pl-en"}],[{"start":4,"end":10,"cssClass":"pl-s1"},{"start":11,"end":12,"cssClass":"pl-c1"},{"start":13,"end":20,"cssClass":"pl-v"},{"start":21,"end":38,"cssClass":"pl-s1"},{"start":40,"end":41,"cssClass":"pl-c1"},{"start":42,"end":49,"cssClass":"pl-v"},{"start":50,"end":69,"cssClass":"pl-s1"}],[{"start":4,"end":12,"cssClass":"pl-s1"},{"start":13,"end":14,"cssClass":"pl-c1"},{"start":15,"end":18,"cssClass":"pl-en"},{"start":19,"end":25,"cssClass":"pl-s1"},{"start":26,"end":32,"cssClass":"pl-en"}],[{"start":4,"end":6,"cssClass":"pl-k"},{"start":7,"end":15,"cssClass":"pl-s1"},{"start":16,"end":18,"cssClass":"pl-c1"},{"start":19,"end":20,"cssClass":"pl-c1"}],[{"start":8,"end":14,"cssClass":"pl-k"},{"start":15,"end":16,"cssClass":"pl-c1"}],[{"start":4,"end":13,"cssClass":"pl-s1"},{"start":14,"end":15,"cssClass":"pl-c1"},{"start":16,"end":19,"cssClass":"pl-c1"},{"start":20,"end":21,"cssClass":"pl-c1"},{"start":22,"end":30,"cssClass":"pl-s1"},{"start":31,"end":32,"cssClass":"pl-c1"},{"start":33,"end":36,"cssClass":"pl-en"},{"start":37,"end":54,"cssClass":"pl-s1"}],[{"start":4,"end":10,"cssClass":"pl-s1"},{"start":11,"end":12,"cssClass":"pl-c1"},{"start":13,"end":16,"cssClass":"pl-c1"},{"start":17,"end":18,"cssClass":"pl-c1"},{"start":19,"end":27,"cssClass":"pl-s1"},{"start":28,"end":29,"cssClass":"pl-c1"},{"start":30,"end":33,"cssClass":"pl-en"},{"start":34,"end":53,"cssClass":"pl-s1"}],[{"start":4,"end":6,"cssClass":"pl-s1"},{"start":7,"end":8,"cssClass":"pl-c1"},{"start":10,"end":11,"cssClass":"pl-c1"},{"start":12,"end":13,"cssClass":"pl-c1"},{"start":14,"end":23,"cssClass":"pl-s1"},{"start":24,"end":25,"cssClass":"pl-c1"},{"start":26,"end":32,"cssClass":"pl-s1"},{"start":34,"end":35,"cssClass":"pl-c1"},{"start":37,"end":46,"cssClass":"pl-s1"},{"start":47,"end":48,"cssClass":"pl-c1"},{"start":49,"end":55,"cssClass":"pl-s1"}],[{"start":4,"end":10,"cssClass":"pl-k"},{"start":11,"end":13,"cssClass":"pl-s1"}],[],[],[{"start":0,"end":3,"cssClass":"pl-k"},{"start":4,"end":21,"cssClass":"pl-en"},{"start":22,"end":32,"cssClass":"pl-s1"},{"start":34,"end":46,"cssClass":"pl-s1"},{"start":48,"end":52,"cssClass":"pl-s1"}],[{"start":4,"end":10,"cssClass":"pl-k"},{"start":11,"end":27,"cssClass":"pl-en"},{"start":28,"end":38,"cssClass":"pl-s1"},{"start":40,"end":44,"cssClass":"pl-s1"},{"start":46,"end":48,"cssClass":"pl-c1"},{"start":49,"end":65,"cssClass":"pl-en"},{"start":66,"end":78,"cssClass":"pl-s1"},{"start":80,"end":84,"cssClass":"pl-s1"}],[],[],[{"start":0,"end":3,"cssClass":"pl-k"},{"start":4,"end":33,"cssClass":"pl-en"},{"start":34,"end":43,"cssClass":"pl-s1"},{"start":45,"end":55,"cssClass":"pl-s1"},{"start":57,"end":70,"cssClass":"pl-s1"},{"start":72,"end":76,"cssClass":"pl-s1"}],[{"start":4,"end":28,"cssClass":"pl-s1"},{"start":29,"end":30,"cssClass":"pl-c1"}],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":20,"cssClass":"pl-s1"},{"start":21,"end":23,"cssClass":"pl-c1"},{"start":24,"end":37,"cssClass":"pl-s1"}],[{"start":8,"end":13,"cssClass":"pl-s1"},{"start":14,"end":15,"cssClass":"pl-c1"},{"start":16,"end":25,"cssClass":"pl-en"},{"start":26,"end":36,"cssClass":"pl-s1"},{"start":38,"end":50,"cssClass":"pl-s1"},{"start":52,"end":56,"cssClass":"pl-s1"}],[{"start":8,"end":32,"cssClass":"pl-s1"},{"start":33,"end":39,"cssClass":"pl-en"},{"start":40,"end":45,"cssClass":"pl-s1"}],[{"start":4,"end":10,"cssClass":"pl-k"},{"start":11,"end":14,"cssClass":"pl-en"},{"start":15,"end":39,"cssClass":"pl-s1"}],[],[],[{"start":0,"end":3,"cssClass":"pl-k"},{"start":4,"end":17,"cssClass":"pl-en"},{"start":18,"end":25,"cssClass":"pl-s1"},{"start":27,"end":38,"cssClass":"pl-s1"},{"start":40,"end":44,"cssClass":"pl-s1"}],[{"start":4,"end":6,"cssClass":"pl-s1"},{"start":7,"end":8,"cssClass":"pl-c1"},{"start":9,"end":20,"cssClass":"pl-s1"},{"start":21,"end":22,"cssClass":"pl-c1"},{"start":23,"end":28,"cssClass":"pl-s1"},{"start":29,"end":30,"cssClass":"pl-c1"},{"start":31,"end":32,"cssClass":"pl-c1"}],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":15,"cssClass":"pl-s1"},{"start":16,"end":18,"cssClass":"pl-c1"},{"start":19,"end":26,"cssClass":"pl-s1"}],[{"start":8,"end":11,"cssClass":"pl-k"},{"start":12,"end":21,"cssClass":"pl-s1"},{"start":22,"end":24,"cssClass":"pl-c1"},{"start":25,"end":32,"cssClass":"pl-s1"},{"start":33,"end":45,"cssClass":"pl-s"}],[{"start":12,"end":15,"cssClass":"pl-k"},{"start":16,"end":18,"cssClass":"pl-s1"},{"start":19,"end":21,"cssClass":"pl-c1"},{"start":22,"end":31,"cssClass":"pl-s1"},{"start":32,"end":37,"cssClass":"pl-s"}],[{"start":16,"end":21,"cssClass":"pl-s1"},{"start":22,"end":24,"cssClass":"pl-c1"},{"start":25,"end":26,"cssClass":"pl-c1"}],[{"start":16,"end":18,"cssClass":"pl-k"},{"start":19,"end":21,"cssClass":"pl-s1"},{"start":22,"end":26,"cssClass":"pl-s"},{"start":28,"end":31,"cssClass":"pl-c1"},{"start":32,"end":34,"cssClass":"pl-c1"},{"start":35,"end":46,"cssClass":"pl-s1"}],[{"start":20,"end":27,"cssClass":"pl-s1"},{"start":28,"end":29,"cssClass":"pl-c1"},{"start":30,"end":52,"cssClass":"pl-s"},{"start":53,"end":54,"cssClass":"pl-c1"},{"start":55,"end":57,"cssClass":"pl-s1"},{"start":58,"end":62,"cssClass":"pl-s"},{"start":64,"end":65,"cssClass":"pl-c1"}],[{"start":30,"end":54,"cssClass":"pl-s"}],[{"start":20,"end":25,"cssClass":"pl-en"},{"start":26,"end":33,"cssClass":"pl-s1"},{"start":35,"end":39,"cssClass":"pl-s1"},{"start":39,"end":40,"cssClass":"pl-c1"},{"start":40,"end":43,"cssClass":"pl-s1"},{"start":44,"end":50,"cssClass":"pl-s1"}],[{"start":20,"end":28,"cssClass":"pl-k"}],[{"start":16,"end":29,"cssClass":"pl-s1"},{"start":30,"end":31,"cssClass":"pl-c1"},{"start":32,"end":36,"cssClass":"pl-en"},{"start":37,"end":40,"cssClass":"pl-en"},{"start":41,"end":47,"cssClass":"pl-k"},{"start":48,"end":49,"cssClass":"pl-s1"},{"start":51,"end":52,"cssClass":"pl-s1"},{"start":53,"end":59,"cssClass":"pl-s"},{"start":62,"end":64,"cssClass":"pl-s1"},{"start":65,"end":74,"cssClass":"pl-s"}],[{"start":16,"end":26,"cssClass":"pl-s1"},{"start":27,"end":28,"cssClass":"pl-c1"},{"start":29,"end":40,"cssClass":"pl-s1"},{"start":41,"end":43,"cssClass":"pl-s1"},{"start":44,"end":48,"cssClass":"pl-s"}],[{"start":16,"end":27,"cssClass":"pl-s1"},{"start":28,"end":30,"cssClass":"pl-c1"},{"start":31,"end":60,"cssClass":"pl-en"}],[{"start":20,"end":37,"cssClass":"pl-s1"},{"start":39,"end":49,"cssClass":"pl-s1"},{"start":51,"end":64,"cssClass":"pl-s1"},{"start":66,"end":70,"cssClass":"pl-s1"}],[{"start":16,"end":18,"cssClass":"pl-s1"},{"start":19,"end":21,"cssClass":"pl-c1"},{"start":22,"end":51,"cssClass":"pl-en"}],[{"start":20,"end":28,"cssClass":"pl-s1"},{"start":30,"end":40,"cssClass":"pl-s1"},{"start":42,"end":55,"cssClass":"pl-s1"},{"start":57,"end":61,"cssClass":"pl-s1"}],[],[{"start":4,"end":15,"cssClass":"pl-s1"},{"start":16,"end":17,"cssClass":"pl-c1"},{"start":18,"end":23,"cssClass":"pl-c1"},{"start":24,"end":25,"cssClass":"pl-c1"},{"start":26,"end":37,"cssClass":"pl-s1"},{"start":38,"end":39,"cssClass":"pl-c1"},{"start":40,"end":45,"cssClass":"pl-s1"}],[{"start":4,"end":6,"cssClass":"pl-s1"},{"start":7,"end":8,"cssClass":"pl-c1"},{"start":9,"end":14,"cssClass":"pl-c1"},{"start":15,"end":16,"cssClass":"pl-c1"},{"start":17,"end":19,"cssClass":"pl-s1"},{"start":20,"end":21,"cssClass":"pl-c1"},{"start":22,"end":27,"cssClass":"pl-s1"}],[],[{"start":4,"end":10,"cssClass":"pl-k"},{"start":12,"end":25,"cssClass":"pl-s"},{"start":27,"end":38,"cssClass":"pl-s1"},{"start":40,"end":44,"cssClass":"pl-s"},{"start":46,"end":48,"cssClass":"pl-s1"}]],"csv":null,"csvError":null,"dependabotInfo":{"showConfigurationBanner":false,"configFilePath":null,"networkDependabotPath":"/yisunlp/Anti-CF/network/updates","dismissConfigurationNoticePath":"/settings/dismiss-notice/dependabot_configuration_notice","configurationNoticeDismissed":null,"repoAlertsPath":"/yisunlp/Anti-CF/security/dependabot","repoSecurityAndAnalysisPath":"/yisunlp/Anti-CF/settings/security_analysis","repoOwnerIsOrg":false,"currentUserCanAdminRepo":false},"displayName":"mlqa_evaluate.py","displayUrl":"https://github.com/yisunlp/Anti-CF/blob/main/utils/mlqa_evaluate.py?raw=true","headerInfo":{"blobSize":"4.72 KB","deleteInfo":{"deleteTooltip":"You must be signed in to make or propose changes"},"editInfo":{"editTooltip":"You must be signed in to make or propose changes"},"ghDesktopPath":"https://desktop.github.com","gitLfsPath":null,"onBranch":true,"shortPath":"1439eb6","siteNavLoginPath":"/login?return_to=https%3A%2F%2Fgithub.com%2Fyisunlp%2FAnti-CF%2Fblob%2Fmain%2Futils%2Fmlqa_evaluate.py","isCSV":false,"isRichtext":false,"toc":null,"lineInfo":{"truncatedLoc":"133","truncatedSloc":"108"},"mode":"file"},"image":false,"isCodeownersFile":null,"isPlain":false,"isValidLegacyIssueTemplate":false,"issueTemplateHelpUrl":"https://docs.github.com/articles/about-issue-and-pull-request-templates","issueTemplate":null,"discussionTemplate":null,"language":"Python","languageID":303,"large":false,"loggedIn":false,"newDiscussionPath":"/yisunlp/Anti-CF/discussions/new","newIssuePath":"/yisunlp/Anti-CF/issues/new","planSupportInfo":{"repoIsFork":null,"repoOwnedByCurrentUser":null,"requestFullPath":"/yisunlp/Anti-CF/blob/main/utils/mlqa_evaluate.py","showFreeOrgGatedFeatureMessage":null,"showPlanSupportBanner":null,"upgradeDataAttributes":null,"upgradePath":null},"publishBannersInfo":{"dismissActionNoticePath":"/settings/dismiss-notice/publish_action_from_dockerfile","dismissStackNoticePath":"/settings/dismiss-notice/publish_stack_from_file","releasePath":"/yisunlp/Anti-CF/releases/new?marketplace=true","showPublishActionBanner":false,"showPublishStackBanner":false},"rawBlobUrl":"https://github.com/yisunlp/Anti-CF/raw/main/utils/mlqa_evaluate.py","renderImageOrRaw":false,"richText":null,"renderedFileInfo":null,"shortPath":null,"tabSize":8,"topBannersInfo":{"overridingGlobalFundingFile":false,"globalPreferredFundingPath":null,"repoOwner":"yisunlp","repoName":"Anti-CF","showInvalidCitationWarning":false,"citationHelpUrl":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-citation-files","showDependabotConfigurationBanner":false,"actionsOnboardingTip":null},"truncated":false,"viewable":true,"workflowRedirectUrl":null,"symbols":{"timed_out":false,"not_analyzed":false,"symbols":[{"name":"PUNCT","kind":"constant","ident_start":529,"ident_end":534,"extent_start":529,"extent_end":650,"fully_qualified_name":"PUNCT","ident_utf16":{"start":{"line_number":18,"utf16_col":0},"end":{"line_number":18,"utf16_col":5}},"extent_utf16":{"start":{"line_number":18,"utf16_col":0},"end":{"line_number":18,"utf16_col":121}}},{"name":"WHITESPACE_LANGS","kind":"constant","ident_start":652,"ident_end":668,"extent_start":652,"extent_end":707,"fully_qualified_name":"WHITESPACE_LANGS","ident_utf16":{"start":{"line_number":19,"utf16_col":0},"end":{"line_number":19,"utf16_col":16}},"extent_utf16":{"start":{"line_number":19,"utf16_col":0},"end":{"line_number":19,"utf16_col":55}}},{"name":"MIXED_SEGMENTATION_LANGS","kind":"constant","ident_start":709,"ident_end":733,"extent_start":709,"extent_end":742,"fully_qualified_name":"MIXED_SEGMENTATION_LANGS","ident_utf16":{"start":{"line_number":20,"utf16_col":0},"end":{"line_number":20,"utf16_col":24}},"extent_utf16":{"start":{"line_number":20,"utf16_col":0},"end":{"line_number":20,"utf16_col":33}}},{"name":"whitespace_tokenize","kind":"function","ident_start":752,"ident_end":771,"extent_start":748,"extent_end":803,"fully_qualified_name":"whitespace_tokenize","ident_utf16":{"start":{"line_number":23,"utf16_col":4},"end":{"line_number":23,"utf16_col":23}},"extent_utf16":{"start":{"line_number":23,"utf16_col":0},"end":{"line_number":24,"utf16_col":23}}},{"name":"mixed_segmentation","kind":"function","ident_start":813,"ident_end":831,"extent_start":809,"extent_end":1319,"fully_qualified_name":"mixed_segmentation","ident_utf16":{"start":{"line_number":27,"utf16_col":4},"end":{"line_number":27,"utf16_col":22}},"extent_utf16":{"start":{"line_number":27,"utf16_col":0},"end":{"line_number":44,"utf16_col":19}}},{"name":"normalize_answer","kind":"function","ident_start":1329,"ident_end":1345,"extent_start":1325,"extent_end":2841,"fully_qualified_name":"normalize_answer","ident_utf16":{"start":{"line_number":47,"utf16_col":4},"end":{"line_number":47,"utf16_col":20}},"extent_utf16":{"start":{"line_number":47,"utf16_col":0},"end":{"line_number":83,"utf16_col":78}}},{"name":"remove_articles","kind":"function","ident_start":1444,"ident_end":1459,"extent_start":1440,"extent_end":2248,"fully_qualified_name":"remove_articles","ident_utf16":{"start":{"line_number":50,"utf16_col":8},"end":{"line_number":50,"utf16_col":23}},"extent_utf16":{"start":{"line_number":50,"utf16_col":4},"end":{"line_number":66,"utf16_col":63}}},{"name":"white_space_fix","kind":"function","ident_start":2260,"ident_end":2275,"extent_start":2256,"extent_end":2614,"fully_qualified_name":"white_space_fix","ident_utf16":{"start":{"line_number":68,"utf16_col":8},"end":{"line_number":68,"utf16_col":23}},"extent_utf16":{"start":{"line_number":68,"utf16_col":4},"end":{"line_number":75,"utf16_col":63}}},{"name":"remove_punc","kind":"function","ident_start":2626,"ident_end":2637,"extent_start":2622,"extent_end":2706,"fully_qualified_name":"remove_punc","ident_utf16":{"start":{"line_number":77,"utf16_col":8},"end":{"line_number":77,"utf16_col":19}},"extent_utf16":{"start":{"line_number":77,"utf16_col":4},"end":{"line_number":78,"utf16_col":60}}},{"name":"lower","kind":"function","ident_start":2718,"ident_end":2723,"extent_start":2714,"extent_end":2759,"fully_qualified_name":"lower","ident_utf16":{"start":{"line_number":80,"utf16_col":8},"end":{"line_number":80,"utf16_col":13}},"extent_utf16":{"start":{"line_number":80,"utf16_col":4},"end":{"line_number":81,"utf16_col":27}}},{"name":"f1_score","kind":"function","ident_start":2851,"ident_end":2859,"extent_start":2847,"extent_end":3368,"fully_qualified_name":"f1_score","ident_utf16":{"start":{"line_number":86,"utf16_col":4},"end":{"line_number":86,"utf16_col":12}},"extent_utf16":{"start":{"line_number":86,"utf16_col":0},"end":{"line_number":96,"utf16_col":13}}},{"name":"exact_match_score","kind":"function","ident_start":3378,"ident_end":3395,"extent_start":3374,"extent_end":3515,"fully_qualified_name":"exact_match_score","ident_utf16":{"start":{"line_number":99,"utf16_col":4},"end":{"line_number":99,"utf16_col":21}},"extent_utf16":{"start":{"line_number":99,"utf16_col":0},"end":{"line_number":100,"utf16_col":85}}},{"name":"metric_max_over_ground_truths","kind":"function","ident_start":3525,"ident_end":3554,"extent_start":3521,"extent_end":3823,"fully_qualified_name":"metric_max_over_ground_truths","ident_utf16":{"start":{"line_number":103,"utf16_col":4},"end":{"line_number":103,"utf16_col":33}},"extent_utf16":{"start":{"line_number":103,"utf16_col":0},"end":{"line_number":108,"utf16_col":40}}},{"name":"evaluate_mlqa","kind":"function","ident_start":3833,"ident_end":3846,"extent_start":3829,"extent_end":4829,"fully_qualified_name":"evaluate_mlqa","ident_utf16":{"start":{"line_number":111,"utf16_col":4},"end":{"line_number":111,"utf16_col":17}},"extent_utf16":{"start":{"line_number":111,"utf16_col":0},"end":{"line_number":132,"utf16_col":49}}}]}},"copilotInfo":null,"copilotAccessAllowed":false,"csrf_tokens":{"/yisunlp/Anti-CF/branches":{"post":"1iepcuFaK4MDs1NJKzZXtpZAFVTLY5i3hHLjbVaHu3jYklFHps4DKPHHesUsZz80Zd4lvXgsmh61QXjuOIUafg"},"/repos/preferences":{"post":"h6m1xQwSMdHdHFKoZbsuhKmgOTqkxDAy_1Y-NzoH3P9yxpymrF3qPQ58stVo284onZr_ea1ZPRblvkJYQwdydQ"}}},"title":"Anti-CF/utils/mlqa_evaluate.py at main · yisunlp/Anti-CF"}